# Woodburn Insurance DX Module

# File structure

```
ðŸ“¦woodburn-insurance-module
 â”£ ðŸ“‚gradle                     - The files being used by the Gradle wrapper
 â”ƒ â”— ðŸ“‚wrapper
 â”ƒ â”ƒ â”£ ðŸ“œgradle-wrapper.jar
 â”ƒ â”ƒ â”— ðŸ“œgradle-wrapper.properties
 â”£ ðŸ“‚src
 â”ƒ â”— ðŸ“‚main
 â”ƒ â”ƒ â”— ðŸ“‚config
 â”ƒ â”ƒ â”ƒ â”£ ðŸ“‚ear                  - Template files that will be used when building the EAR file which will be deployed to WebSphere. 
 â”ƒ â”ƒ â”ƒ â”ƒ â”— ðŸ“‚META-INF
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”— ðŸ“œWebSphere.policy
 â”ƒ â”ƒ â”ƒ â”— ðŸ“‚war                  - Template files that will be used when building the WAR file inside the EAR file.
 â”ƒ â”ƒ â”ƒ â”ƒ â”£ ðŸ“‚WEB-INF
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”£ ðŸ“œibm-web-bnd.xmi
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”£ ðŸ“œibm-web-ext.xmi
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”— ðŸ“œplugin.xml
 â”ƒ â”ƒ â”ƒ â”ƒ â”— ðŸ“œweb.xml
 â”ƒ â”ƒ â”— ðŸ“‚webapp                 - Directory for web app modules, components and services
 â”£ ðŸ“œ.gitignore
 â”£ ðŸ“œREADME.MD
 â”£ ðŸ“œbuild.gradle               - This file is the build program being used to build the EAR file which will be deployed to the WebSphere.
 â”£ ðŸ“œgradle.properties          - The environment property variables being used by the Gradle program.
 â”£ ðŸ“œgradlew                    - The wrapper that you will be using to run the program without needing the Gradle installed on a non-Windows machine.
 â”£ ðŸ“œgradlew.bat                - The wrapper that you will be using to run the program without needing the Gradle installed on a Windows machine.
 â”£ ðŸ“œindex.js                   - Exports the modules you are using; this is used by the webpack.
 â”£ ðŸ“œpackage-lock.json
 â”£ ðŸ“œpackage.json               - The usual package.json of NPM
 â”£ ðŸ“œsettings.gradle            - The environment settings variables being used by the Gradle program.
 â”— ðŸ“œwebpack.dx-module.js       - This is the webpack profile configuration that is being used by package.json.
 ```

## Setup

Refer to the guide below on how to create/setup a DX Module:

a. [How to Deploy JavaScript Libraries/Dependencies as a DX Module](../../../02DependenciesAsModule/README.MD).

b. [How To Deploy Apps with Different Dependency Versions](../../../05AppsWithDiffDepVersions/README.md)

## Optional: Typescript

The following will describe how to use typescript in DX Module.
## Optional Setup
1. Install typescript and ts-loader:
    ```
    npm i typescript ts-loader -D
    ```

2. Create a tsconfig.json.

    ```
    {
        "compilerOptions": {
            "outDir": "./dist/",
            "noImplicitAny": true,
            "module": "es6",
            "target": "es5",
            "allowJs": true,
            "moduleResolution": "node",
            "resolveJsonModule": true,
            "esModuleInterop": true
        }
    }
    ```

3. Update the DX module's webpack [config](SubModuleReact/webpack.dxmodules.js) for typescript files.
    ```
    module.exports = {
        ...
        module: {
            rules: [
                {
                    test: /\.(js|mjs|jsx|ts|tsx)$/,
                    use: 'ts-loader',
                    exclude: /node_modules/,
                },
            ]
        },
        ...
        resolve: {
            extensions: ['.ts', '.js', '.json']
        }
    };
    ```

## How to use the sample service providers in script app:
[InsuranceDataProvider.ts](SubModuleReact/services/InsuranceDataProvider.ts)

    InsuranceProvider.getInsuranceByZipCode(XXXX)

    Return Value:
    [
        {
            "type": "Life Insurance",
            "id": 1
        },
        {
            "type": "Home Insurance",
            "id": 2
        },
        {
            "type": "Auto Insurance",
            "id": 3
        }
    ]


[UserDataProvider.ts](SubModuleReact/services/UserDataProvider.ts)

    UserProvider.getUserByEmail(XXXXXXX@XXXXX.com)

    Return Value:
    {
        "id": X,
        "first_name": "XXXX XXXXX",
        "last_name": "XXXXX",
        "email": "XXXXXXX.XXXXX@XXXXX.com"
    }
